<h1>Appointments</h1>

<% if @appointments.any? %>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Doctor</th>
        <th>Department</th>
        <th>Appointment Date</th>
	<th>Patient Id</th>
	<th> Slot </th>
        <!-- Add other columns as needed -->
      </tr>
    </thead>
    <tbody>
      <% @appointments.each do |appointment| %>
        <tr>
          <td><%= appointment.doctor_name %></td>
          <td><%= appointment.department_name %></td>
          <td><%= appointment.appointment_date %></td>
	  <td><%= appointment.patient_id %></td>
	  <td> <%= appointment.timeslot.start_time.strftime("%H:%M:%S") %> - <%= appointment.timeslot.end_time.strftime("%H:%M:%S") %> </td>
          <!-- Add other columns as needed -->
        </tr>
      <% end %>
    </tbody>
  </table>
  <%#= will_paginate @appointments %>

<% else %>
  <p>No appointments available.</p>
<% end %>
  <%= will_paginate @appointments %>


<h1>Patients</h1>

<% if @patients.any? %>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Patient ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Date of Birth</th>
        <th>Email</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @patients.each do |patient| %>
        <tr>
          <td><%= patient.patient_id %></td>
          <td><%= patient.first_name %></td>
          <td><%= patient.last_name %></td>
          <td><%= patient.date_of_birth %></td>
          <td><%= patient.email %></td>
          <td>
            <%= link_to 'Create Appointment', new_patient_appointment_path(patient_id: patient.id), class: 'btn btn-primary' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No patients available.</p>
<% end %>


<%= will_paginate @patients %>


<%#= link_to 'New Appointment', new_patient_appointment_path(patient_id: @patient&.id), class: 'btn btn-primary' %>
<%= link_to 'Back to Patients', patients_path, class: 'btn btn-secondary' %>

